# üîç –û—Ç—á–µ—Ç –æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ FNS API

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–î–∞—Ç–∞**: 2024-08-07  
**–°–µ—Ä–≤–µ—Ä**: 91.236.198.205  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã**: 3000, 4000, 4001, 4020, 5000

## ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. FNS API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- ‚ùå –ù–∏ –æ–¥–∏–Ω –∏–∑ FNS —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- ‚ùå –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø—É—Ç–∏: `/fns/*` –∏ `/api/fns/*`
- ‚ùå –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø–æ—Ä—Ç—ã: 3000-5000

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º –Ω–∞ –ø–æ—Ä—Ç—É 4000
```
–û—à–∏–±–∫–∞: ENOENT: no such file or directory, stat '/back/dist/static/index.html'
```
- ‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –æ—Ç–≤–µ—á–∞–µ—Ç
- ‚ùå –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
- ‚ùå –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 404

### 3. –ü–æ—Ä—Ç 3000 - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)
- ‚ùå FNS API –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –Ω–µ –Ω–∞–π–¥–µ–Ω

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### A. FNS –º–æ–¥—É–ª—å –Ω–µ –≤–∫–ª—é—á–µ–Ω –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
–í–æ–∑–º–æ–∂–Ω–æ, –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–ø—É—â–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ FNS –º–æ–¥—É–ª—è.

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```bash
# –í app.module.ts –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–º–ø–æ—Ä—Ç
import { FnsModule } from './fns/fns.module';

@Module({
  imports: [
    // ...
    FnsModule,  // ‚Üê –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω
  ],
})
```

### B. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∏–ª–∏ –¥–µ–ø–ª–æ–π
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–±—Ä–∞–Ω–æ –±–µ–∑ FNS –º–æ–¥—É–ª—è –∏–ª–∏ —Å –æ—à–∏–±–∫–∞–º–∏.

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```bash
# –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
pm2 logs backend  # –∏–ª–∏ docker logs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
curl http://91.236.198.205:4000/api/ -v
```

### C. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
–í–æ–∑–º–æ–∂–Ω–æ, –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- `.env` —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `NODE_ENV`, `PORT`, etc.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
ssh user@91.236.198.205
pm2 status
pm2 logs backend

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat .env
echo $NODE_ENV
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ FnsModule —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
grep -r "FnsModule" src/app.module.ts

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
ls -la src/fns/
cat src/fns/fns.controller.ts
```

### 3. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π
```bash
# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
pm2 restart backend

# –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker
docker-compose restart backend
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ
cd tests
node test-connection.js

# –ï—Å–ª–∏ API –Ω–∞–π–¥–µ–Ω, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
node run-all-new-fns-tests.js
```

## üìã –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] FnsModule –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ app.module.ts
- [ ] –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ—à–∏–±–æ–∫
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/fns/queue/stats` –æ—Ç–≤–µ—á–∞–µ—Ç

## üîÑ –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å**: ‚ùå –¢–µ—Å—Ç—ã –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã  
**–ü—Ä–∏—á–∏–Ω–∞**: FNS API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ  
**–î–µ–π—Å—Ç–≤–∏–µ**: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–µ—Ä–∞  

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É**: `node tests/test-connection.js`
2. **–ï—Å–ª–∏ API –Ω–∞–π–¥–µ–Ω**: `node tests/run-all-new-fns-tests.js`
3. **–î–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤**: `node tests/run-all-new-fns-tests.js scanQr`

---

**–í–∞–∂–Ω–æ**: –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ. –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ - FNS API –ø—Ä–æ—Å—Ç–æ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É.